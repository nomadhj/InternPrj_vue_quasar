"use strict";(globalThis["webpackChunkquasar_vue_project"]=globalThis["webpackChunkquasar_vue_project"]||[]).push([[15],{7015:(e,a,l)=>{l.r(a),l.d(a,{default:()=>m});var u=l(9835),i=l(6970),t=l(499),v=l(8339);const s={class:"trippy-stroy-wrapper"},n={class:"indicator-wrapper"},o=(0,u._)("div",{class:"guides-gradient"},null,-1),r=(0,u._)("div",{class:"carousel-background"},[(0,u._)("p",{class:"carousel-content"},"[주요 기능]")],-1),c={__name:"TrippyStory",setup(e){const a=(0,v.yj)(),l=(0,v.tv)(),c=(0,t.iH)(0),d=(0,t.iH)(),p=(0,t.iH)(),f=(0,t.iH)(0),g=(0,t.iH)(5e3),h=(0,t.iH)(0),w=(0,t.iH)(0),y=(0,t.iH)(0),m=(0,t.iH)(0),_=(0,t.iH)(0),H=(0,t.iH)(!1),k=(0,t.iH)(!1),j=(0,t.iH)(0);async function b(e){const a=await fetch("https://vueproject-8c9fd-default-rtdb.firebaseio.com/story.json"),l=await a.json(),u=l.find((a=>a.id===+e)),i=l.indexOf(u);j.value=l.length,d.value=u,p.value=i}function I(e){l.push({path:e})}function x(){const e=Date.now();m.value=setInterval((()=>{let a=Date.now();h.value>0?w.value=y.value+Math.floor((a-e)/g.value*100):w.value=Math.floor((a-e)/g.value*100)}),g.value/100),h.value>0?_.value=setInterval(D,h.value):_.value=setInterval(D,g.value)}function C({offsetX:e}){if(k.value)return;if(H.value)return;k.value=!0;const a=document.querySelector(".trippy-stroy-wrapper").offsetWidth;if(e>=a/2)c.value===d.value.list.length-1?(I(`/story/${d.value.id+1}`),p.value+1===j.value&&I("/")):c.value+=1;else if(c.value>0&&e<a/2)c.value-=1;else if(0===c.value&&e<a/2){if(0===p.value)return void setTimeout((()=>{k.value=!1}),300);I(`/story/${d.value.id+1}`)}$(),setTimeout((()=>{k.value=!1}),300)}function q(e){const{direction:a,distance:l,isFinal:u}=e;if(!H.value)if("left"===a&&l.x>150&&u)I(`/story/${d.value.id+1}`),p.value+1===j.value&&I("/"),$();else if("right"===a&&l.x>150&&u){if(0===p.value)return;I("/story/"+(d.value.id-1)),$()}}function D(){c.value===d.value.list.length-1&&(I(`/story/${d.value.id+1}`),p.value+1===j.value&&I("/"),c.value+=1),c.value<d.value.list.length-1&&(c.value+=1),$()}function T(){!1===H.value?(y.value=w.value,clearInterval(m.value),clearInterval(_.value),h.value=g.value-y.value*g.value/100):x(),H.value=!H.value}function $(){w.value=0,h.value=0,y.value=0,clearInterval(m.value),clearInterval(_.value)}return(0,u.bv)((()=>{b(a.params.id),x(),localStorage.setItem(`isActive${a.params.id}`,!0)})),(0,u.YP)(c,(e=>{f.value=e,$(),x()})),(e,a)=>{var l;const t=(0,u.up)("q-icon"),v=(0,u.up)("q-carousel-slide"),p=(0,u.up)("q-carousel"),g=(0,u.Q2)("touch-pan");return(0,u.wg)(),(0,u.iD)("section",s,[(0,u._)("div",n,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(null===(l=d.value)||void 0===l?void 0:l.list,((e,a)=>((0,u.wg)(),(0,u.iD)("div",{class:"indicator-background",key:a,style:(0,i.j5)({width:100/d.value.list.length+"%"})},[(0,u._)("div",{class:"indicator",style:(0,i.j5)(a===f.value?`width: ${w.value}%`:f.value>a?"width:100%":"width:0%")},null,4)],4)))),128))]),o,(0,u._)("div",{class:"guides-close",onClick:a[0]||(a[0]=e=>I("/"))},[(0,u.Wm)(t,{name:"close",size:"36px"})]),(0,u._)("div",{class:"guides-pause",onClick:T},[H.value?((0,u.wg)(),(0,u.j4)(t,{key:0,name:"play_arrow",size:"36px"})):((0,u.wg)(),(0,u.j4)(t,{key:1,name:"pause",size:"36px"}))]),(0,u.Wm)(p,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),"transition-prev":"slide-right","transition-next":"slide-left",animated:"",class:"guides-carousel-wrapper",onClick:a[2]||(a[2]=e=>C(e))},{default:(0,u.w5)((()=>{var e;return[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(null===(e=d.value)||void 0===e?void 0:e.list,((e,a)=>(0,u.wy)(((0,u.wg)(),(0,u.j4)(v,{class:"guides-carousel",key:a,name:a},{default:(0,u.w5)((()=>[r])),_:2},1032,["name"])),[[g,q,void 0,{left:!0,right:!0}]]))),128))]})),_:1},8,["modelValue"])])}}};var d=l(2857),p=l(960),f=l(1694),g=l(2873),h=l(9984),w=l.n(h);const y=c,m=y;w()(c,"components",{QIcon:d.Z,QCarousel:p.Z,QCarouselSlide:f.Z}),w()(c,"directives",{TouchPan:g.Z})}}]);