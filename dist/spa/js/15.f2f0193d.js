"use strict";(globalThis["webpackChunkquasar_vue_project"]=globalThis["webpackChunkquasar_vue_project"]||[]).push([[15],{7015:(e,a,l)=>{l.r(a),l.d(a,{default:()=>h});var u=l(9835),t=l(6970),o=l(499),s=l(8339);const i={class:"trippy-stroy-wrapper"},n={class:"indicator-wrapper"},v=["src"],r={__name:"TrippyStory",setup(e){const a=(0,s.yj)(),l=(0,s.tv)(),r=(0,o.iH)(0),c=(0,o.iH)(null),d=(0,o.iH)(0),p=(0,o.iH)(5e3),m=(0,o.iH)(0),w=(0,o.iH)(0),f=(0,o.iH)(0),h=(0,o.iH)(0),g=(0,o.iH)(0),y=(0,o.iH)({mousedown:0,mouseup:0});async function _(){const e=await fetch(`https://vueproject-8c9fd-default-rtdb.firebaseio.com/story/${a.params.id}.json`),l=await e.json();c.value=l}function k(e){l.push({path:e})}function H(){const e=(new Date).getTime();h.value=setInterval((()=>{let a=(new Date).getTime();m.value>0?w.value=f.value+Math.floor((a-e)/p.value*100):w.value=Math.floor((a-e)/p.value*100)}),p.value/100),m.value>0?g.value=setInterval(I,m.value):g.value=setInterval(I,p.value)}function b(){r.value===c.value.list.length-1&&(k(`/story/${c.value.id+1}`),c.value.id+1===2&&k("/")),r.value+=1,D()}function j(){0===r.value&&(k("/story/"+(c.value.id-1)),0===c.value.id&&k("/")),r.value-=1,D()}function I(){r.value===c.value.list.length-1&&(k(`/story/${c.value.id+1}`),c.value.id+1===2&&k("/"),r.value+=1),r.value<c.value.list.length-1&&(r.value+=1),D()}function C(e,a){const{type:l,timeStamp:u}=a;if("mousedown"===l&&(y.value.mousedown=u,f.value=w.value,clearInterval(h.value),clearInterval(g.value),m.value=p.value-f.value*p.value/100),"mouseup"===l){if(y.value.mouseup=u,y.value.mouseup-y.value.mousedown<150&&e)return void window.open(e,"_self");H()}}function D(){w.value=0,m.value=0,f.value=0,clearInterval(h.value),clearInterval(g.value)}return(0,u.bv)((()=>{_(),H(),localStorage.setItem(`isActive${a.params.id}`,!0)})),(0,u.YP)(r,(e=>{d.value=e,D(),H()})),(e,a)=>{var l;const o=(0,u.up)("q-icon"),s=(0,u.up)("q-carousel-slide"),p=(0,u.up)("q-carousel");return(0,u.wg)(),(0,u.iD)("section",i,[(0,u._)("div",n,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(null===(l=c.value)||void 0===l?void 0:l.list,((e,a)=>((0,u.wg)(),(0,u.iD)("div",{class:"indicator-background",key:a,style:(0,t.j5)({width:100/c.value.list.length+"%"})},[(0,u._)("div",{class:"indicator",style:(0,t.j5)(a===d.value?`width: ${w.value}%`:d.value>a?"width:100%":"width:0%")},null,4)],4)))),128))]),(0,u._)("div",{class:"story-close",onClick:a[0]||(a[0]=e=>k("/"))},[(0,u.Wm)(o,{name:"close",size:"24px"})]),(0,u._)("div",{class:"left-arrow",onClick:j},[(0,u.Wm)(o,{name:"chevron_left",size:"32px"})]),(0,u._)("div",{class:"right-arrow",onClick:b},[(0,u.Wm)(o,{name:"chevron_right",size:"32px"})]),(0,u.Wm)(p,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value=e),"transition-prev":"slide-right","transition-next":"slide-left",animated:"",class:"story-carousel-wrapper"},{default:(0,u.w5)((()=>{var e;return[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(null===(e=c.value)||void 0===e?void 0:e.list,((e,a)=>((0,u.wg)(),(0,u.j4)(s,{class:"story-carousel",key:a,name:a,onMousedown:a=>C(e.link,a),onMouseup:a=>C(e.link,a)},{default:(0,u.w5)((()=>[(0,u._)("img",{class:"carousel-image",src:e.images,alt:"",draggable:"false"},null,8,v)])),_:2},1032,["name","onMousedown","onMouseup"])))),128))]})),_:1},8,["modelValue"])])}}};var c=l(2857),d=l(960),p=l(1694),m=l(9984),w=l.n(m);const f=r,h=f;w()(r,"components",{QIcon:c.Z,QCarousel:d.Z,QCarouselSlide:p.Z})}}]);